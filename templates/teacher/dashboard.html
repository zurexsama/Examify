<!DOCTYPE html>
<html lang="en">
<head>
    <title>Teacher Dashboard | Examify</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ 'danger' if category == 'error' else 'success' }}" style="position: fixed; top: 20px; right: 20px; z-index: 1000; max-width: 400px;">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <h1>üë®‚Äçüè´ Examify - Teacher Dashboard</h1>
            <div class="user-info">
                <span>Welcome, {{ session.name }}!</span>
                <a href="/logout" class="logout-btn">Logout</a>
            </div>
        </header>

        <main class="dashboard-main">
            <div class="dashboard-section">
                <h2>üìö My Topics</h2>
                <div class="topics-grid">
                    {% if topics %}
                        {% for topic in topics %}
                            <div class="topic-card">
                                <h3>{{ topic.name }}</h3>
                                <p>{{ topic.description }}</p>
                                <p class="creator-info">Created by: {{ session.name }}</p>
                                <div class="topic-actions">
                                    <span class="topic-id">ID: {{ topic.id }}</span>
                                    <form method="POST" action="/teacher/delete-topic/{{ topic.id }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this topic? This action cannot be undone.');">
                                        <button type="submit" class="btn-delete">Delete</button>
                                    </form>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="no-content">
                            <p>You haven't created any topics yet.</p>
                        </div>
                    {% endif %}
                </div>
                <div class="action-buttons">
                    <a href="/teacher/create-topic" class="btn-primary">+ Create New Topic</a>
                </div>
            </div>

            <div class="dashboard-section">
                <h2>üìù My Quizzes</h2>
                <div class="quizzes-grid">
                    {% if quizzes %}
                        {% for quiz in quizzes %}
                            <div class="quiz-card">
                                <h3>{{ quiz.title }}</h3>
                                <p class="quiz-details">
                                    Duration: {{ quiz.duration }} minutes |
                                    Total Marks: {{ quiz.total_marks }}
                                </p>
                                <p class="creator-info">Created by: {{ session.name }}</p>
                                <div class="quiz-actions">
                                    <a href="/teacher/results/{{ quiz.id }}" class="btn-secondary">View Results</a>
                                    <a href="/teacher/download-scores/{{ quiz.id }}" class="btn-download">Download Scores</a>
                                    <form method="POST" action="/teacher/delete-quiz/{{ quiz.id }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this quiz? This action cannot be undone.');">
                                        <button type="submit" class="btn-delete">Delete</button>
                                    </form>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="no-content">
                            <p>You haven't created any quizzes yet.</p>
                        </div>
                    {% endif %}
                </div>
                <div class="action-buttons">
                    <a href="/teacher/create-quiz" class="btn-primary">+ Create New Quiz</a>
                </div>
            </div>

            <div class="dashboard-section">
                <h2>üìä Quick Stats</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>{{ topics|length }}</h3>
                        <p>Topics Created</p>
                    </div>
                    <div class="stat-card">
                        <h3>{{ quizzes|length }}</h3>
                        <p>Quizzes Created</p>
                    </div>
                    <div class="stat-card">
                        <h3>0</h3>
                        <p>Total Students</p>
                    </div>
                    <div class="stat-card">
                        <h3>0</h3>
                        <p>Quiz Attempts</p>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>